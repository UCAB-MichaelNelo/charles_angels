import{j as e,F as y,r as p,M as R,a as D,b as t,G as i,T as r,u as w,c as B,d as L,R as S,P as b,B as E,s as P}from"./index.6f94c60a.js";import{n as O,A as k,S as c}from"./AddButton.d203515a.js";import{g as I,B as x,a as U,d as j}from"./houses.bdd5c657.js";import{C as G,a as W,b as X,c as _}from"./CardMedia.3a442345.js";function z({house:a,open:n,onClose:m}){if(!a)return e(y,{});const[g,v]=p.exports.useState(I(a));return e(R,{open:n,onClose:m,closeAfterTransition:!0,keepMounted:!0,children:e(D,{in:n,children:t(x,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"background.paper",width:560,maxHeight:"97.5%",border:"1px solid black",borderRadius:1,overflow:"auto"},children:[e(x,{sx:{width:"100%",paddingTop:"56.25%",position:"relative"},children:e("img",{src:g,style:{width:"100%",height:"100%",cursor:"pointer",position:"absolute",inset:0},onError:u=>{u.preventDefault(),v(O)}})}),e(x,{sx:{userSelect:"none",p:4},children:t(i,{container:!0,spacing:4,children:[t(i,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"RIF DE LA CASA"}),t(r,{variant:"body1",children:["J-",a.rif]})]}),t(i,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"NOMBRE DE LA CASA"}),e(r,{variant:"body1",children:a.name})]}),t(i,{item:!0,xs:12,children:[e(r,{variant:"subtitle2",children:"PERSONA CONTACTO"}),t(r,{variant:"body1",children:[a.contact.name," ",a.contact.lastname]})]}),t(i,{item:!0,xs:12,children:[e(r,{variant:"subtitle2",children:"DIRECCION DE LA CASA"}),e(r,{variant:"body1",children:a.address})]}),t(i,{item:!0,xs:12,children:[e(r,{variant:"subtitle2",children:"NUMEROS DE TELEFONO DE CONTACTO"}),a.phones.map(u=>e(r,{variant:"body1",children:u},u))]}),t(i,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"EDAD MINIMA"}),e(r,{variant:"body1",children:a.minimumAge})]}),t(i,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"EDAD MAXIMA"}),e(r,{variant:"body1",children:a.maximumAge})]}),t(i,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"CUPOS MAXIMOS"}),e(r,{variant:"body1",children:a.maxShares})]}),t(i,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"CUPOS OCUPADOS"}),e(r,{variant:"body1",children:a.currentShares})]}),t(i,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"NI\xD1OS ATENDIDOS"}),e(r,{variant:"body1",children:a.currentBoysHelped})]}),t(i,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"NI\xD1AS ATENDIDAS"}),e(r,{variant:"body1",children:a.currentGirlsHelped})]}),t(i,{item:!0,xs:12,children:[e(r,{variant:"subtitle2",children:"HORARIO DE ATENCION"}),t(r,{variant:"body1",children:[a.scheduleStartTime," - ",a.scheduleEndTime]})]})]})})]})})})}const h=5;function V(){const a=p.exports.useMemo(()=>new Array(h).fill(1),[]),[n,m]=p.exports.useState({houses:null}),[g,v]=p.exports.useState(""),[u,C]=p.exports.useState(null),T=w(),M=B(),f=p.exports.useMemo(()=>{var l;return(l=n.houses)==null?void 0:l.filter(d=>d.name.toLowerCase().includes(g.toLowerCase())).reduce((d,s,o,A)=>o%h==0?[A.slice(o,o+h),...d]:d,[])},[n,g]),N=(l,d)=>{l.stopPropagation(),T(P(d)),M("/casas/actualizar")},F=async(l,d)=>{var o;if(l.stopPropagation(),!(n!=null&&n.houses))return;const s=(o=n==null?void 0:n.houses)==null?void 0:o.indexOf(d);if(await j(d),s!=-1){const[A,H]=[n.houses.slice(0,s),n.houses.slice(s+1)];m({houses:A.concat(H)})}};return p.exports.useEffect(()=>{U().then(l=>m({houses:l}))},[]),t(y,{children:[t(x,{sx:{display:"flex",gap:3},children:[e(L,{fullWidth:!0,variant:"outlined",label:"Buscar casa hogar",sx:{backgroundColor:"#eee"},onChange:l=>v(l.target.value)}),e(k,{popoverText:"Crear casa hogar",route:"crear"})]}),e(z,{house:u,open:!!u,onClose:()=>C(null)}),e(D,{in:!!n.houses,children:e(x,{sx:{pt:6},children:t(i,{container:!0,spacing:4,children:[!n.houses&&a.map((l,d)=>t(S.Fragment,{children:[e(i,{item:!0,xs:12/h,children:t(b,{variant:"outlined",sx:{px:2,pt:0,pb:3},children:[e(c,{height:150}),e(c,{height:30})]})}),e(i,{item:!0,xs:12/h,children:t(b,{variant:"outlined",sx:{px:2,pt:0,pb:3},children:[e(c,{height:150}),e(c,{height:30})]})}),e(i,{item:!0,xs:12/h,children:t(b,{variant:"outlined",sx:{px:2,pt:0,pb:3},children:[e(c,{height:150}),e(c,{height:30})]})}),e(i,{item:!0,xs:12/h,children:t(b,{variant:"outlined",sx:{px:2,pt:0,pb:3},children:[e(c,{height:150}),e(c,{height:30})]})})]},d)),f&&f.map((l,d)=>e(S.Fragment,{children:l.map(s=>e(i,{item:!0,xs:12/h,onClick:()=>C(s),children:s&&t(G,{variant:"outlined",sx:{height:"100%",display:"grid",cursor:"pointer","&:hover":{boxShadow:"-2px 2px 20px rgba(0 0 0 / 15%), 2px -2px 20px rgba(0 0 0 / 15%), 2px 2px 20px rgba(0 0 0 /15%), -2px -2px 20px rgba(0 0 0 / 15%)"}},children:[e(W,{component:"img",height:150,image:I(s),onError:o=>{o.preventDefault(),o.target.src=O}}),t(X,{children:[e(r,{component:"p",sx:{fontWeight:600},variant:"subtitle1",children:s.name}),t(r,{component:"p",variant:"subtitle2",gutterBottom:!0,children:["RIF: ",s.rif]}),e(r,{component:"p",variant:"body1",children:s.address})]}),t(_,{sx:{mt:"auto"},children:[e(E,{onClick:o=>N(o,s),variant:"outlined",children:"Editar"}),e(E,{onClick:o=>F(o,s),color:"error",variant:"outlined",children:"Eliminar"})]})]})},s.id))},d))]})})})]})}export{V as default};
