function T(e){return fetch(`/api/children/${e}`,{mode:"same-origin"}).then(n=>n.json())}function B(e){return fetch(`/api/children?house=${e}`,{mode:"same-origin"}).then(n=>n.json())}function I(){return fetch("/api/children",{mode:"same-origin"}).then(e=>e.json())}function w({id:e}){return`/api/children/${e}/img?${performance.now()}`}function J(){return fetch("/api/children/personalInformation",{mode:"same-origin"}).then(e=>e.json()).then(e=>e.reduce((n,t)=>({...n,[t.ci]:t}),{}))}function N(e){var t;const n=new FormData;return n.append("image",e.photo[0]),n.append("childForm",JSON.stringify({houseId:e.houseId,pInfo:e.information,mInfo:e.mother,fInfo:e.father,npInfo:e.nonParent,rBen:(t=e.relBen.map(({value:a})=>a))!=null?t:[],attire:e.attire})),fetch("/api/children",{method:"POST",body:n,mode:"same-origin"})}function j(e){return fetch(`/api/children/unique?ci=${e}`,{mode:"same-origin"}).then(n=>n.ok)}function y(e,n){return fetch(`/api/children/${e}/information`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),mode:"same-origin"}).then(t=>t.ok)}function l(e,n){return fetch(`/api/children/${e}/attire`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),mode:"same-origin"}).then(t=>t.ok)}function o(e,n){const t=Object.keys(n)[0],a=n[t];return fetch(`/api/children/${e}/${t}${a?`?ci=${a}`:""}`,{method:"PATCH",mode:"same-origin"}).then(r=>r.ok)}function C(e,n){return fetch(`/api/children/${e}/img`,{method:"PATCH",body:n,mode:"same-origin"}).then(t=>t.ok)}function P(e,n){return fetch(`/api/children/${e}/house`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n}),mode:"same-origin"})}function S(e,n){return fetch(`/api/children/${e}/related`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n}),mode:"same-origin"})}function O(e,n){return fetch(`/api/children/${e}/related`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n}),mode:"same-origin"})}async function b(e,n){var t,a,r,f,s,d,p,m,u;if(e.photo&&await C(n.id,e.photo[0]),JSON.stringify(e.information)!=JSON.stringify(n.information)&&await y(n.id,e.information),JSON.stringify(e.attire)!=JSON.stringify(n.attire)&&await l(n.id,e.attire),((t=e.mother)==null?void 0:t.ci)!=((a=n.mother)==null?void 0:a.ci)&&await o(n.id,{mother:(r=e.mother)==null?void 0:r.ci}),((f=e.father)==null?void 0:f.ci)!=((s=n.father)==null?void 0:s.ci)&&await o(n.id,{father:(d=e.father)==null?void 0:d.ci}),((p=e.nonParent)==null?void 0:p.ci)!=((m=n.nonParent)==null?void 0:m.ci)&&await o(n.id,{representative:(u=e.nonParent)==null?void 0:u.ci}),e.houseId!=n.houseId&&await P(n.id,e.houseId),JSON.stringify(e.relBen)!=JSON.stringify(n.relBen)){const h=new Set(e.relBen.map(({value:i})=>i)),c=new Set(n.relBen),g=e.relBen.filter(({value:i})=>!c.has(i)),$=n.relBen.filter(i=>!h.has(i));await Promise.all(g.map(({value:i})=>S(n.id,i))),await Promise.all($.map(i=>O(n.id,i)))}}function A(e){return fetch(`/api/children/${e}`,{method:"DELETE"})}export{T as a,B as b,J as c,A as d,I as e,N as f,w as g,j as i,b as u};
