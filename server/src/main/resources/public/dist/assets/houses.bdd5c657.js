import{q as g,t as x,C as S,v as T,j as $}from"./index.6f94c60a.js";const C=g(),A=x({defaultTheme:C,defaultClassName:"MuiBox-root",generateClassName:S.generate});var I=A,P=T($("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined");function v(e){const a=e.houseImage[0],[t,o]=a.name.split(".").reverse(),r={fileExtension:t,name:e.houseName,rif:e.houseRif,address:e.houseAddress,phones:e.housePhones.map(({value:s})=>s),maxShares:e.houseMaxShares,minimumAge:e.houseMinimumAge,maximumAge:e.houseMaximumAge,currentShares:0,currentGirlsHelped:0,currentBoysHelped:0,scheduleStartTime:e.houseScheduleStartTime,scheduleEndTime:e.houseScheduleEndTime},d={ci:e.houseContactCI,name:e.houseContactName,lastname:e.houseContactLastname};return fetch(`/api/houses/image?ext=${t}&rif=${e.houseRif}`,{method:"PUT",body:a,mode:"same-origin"}).then(s=>{if(s.ok)return fetch("/api/houses",{method:"POST",body:JSON.stringify({house:r,contact:d}),headers:{"Content-Type":"application/json"}});window.alert("Error uploading image file")})}function H(e){return fetch(`/api/houses/${e}`,{mode:"same-origin"}).then(a=>a.ok)}function j(){return fetch("/api/contacts",{mode:"same-origin"}).then(e=>e.json()).then(e=>e.reduce((a,t)=>Object.assign(a,{[t.ci]:t}),{}))}function O(){return fetch("/api/houses",{mode:"same-origin"}).then(e=>e.json()).then(async e=>Promise.all(e.map(async a=>({contact:await y(a.contactCI),...a}))))}function k(e){return fetch(`/api/houses?birthdate=${e}`,{mode:"same-origin"}).then(a=>a.json())}function y(e){return fetch(`/api/contacts/${e}`,{mode:"same-origin"}).then(a=>a.json())}function M({id:e}){return`/api/houses/${e}/image?${performance.now()}`}function n(e,a){const t=Object.keys(a)[0];return fetch(`/api/houses/${e}/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),mode:"same-origin"}).then(o=>o.ok)}function E(e,a){return fetch(`/api/houses/${e}/phone`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:a}),mode:"same-origin"}).then(t=>t.ok)}function w(e,a){return fetch(`/api/houses/${e}/phone`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({index:a}),mode:"same-origin"}).then(t=>t.ok)}function N(e,a){const[t,o]=a.name.split(".").reverse();return fetch(`/api/houses/${e}/image?ext=${t}`,{method:"PATCH",body:a,mode:"same-origin"}).then(r=>r.ok)}async function B(e,a){const t=Number(e.houseRif),o=Number(e.houseMaxShares),r=Number(e.houseMaximumAge),d=Number(e.houseMinimumAge),s=e.housePhones.map(({value:h})=>h);if(e.houseName!=a.name&&!await n(a.id,{name:e.houseName}))return[!1,"Nombre"];if(e.houseImage&&e.houseImage[0]&&!await N(a.id,e.houseImage[0]))return[!1,"Imagen"];if(t!=a.rif&&!await n(a.id,{rif:t}))return[!1,"RIF"];if(e.houseAddress!=a.address&&!await n(a.id,{address:e.houseAddress}))return[!1,"Direcci\xF3n"];if(JSON.stringify(s)!=JSON.stringify(a.phones)){const h=new Set(a.phones),c=new Set(s),m=s.filter(i=>!h.has(i)),l=a.phones.map((i,u)=>[i,u]).filter(([i,u])=>!c.has(i)).map(([i,u])=>u),f=await Promise.all(l.map(i=>w(a.id,i))),p=await Promise.all(m.map(i=>E(a.id,i)));if(f.find(i=>!i)||p.find(i=>!i))return[!1,"Telefonos"]}return o!=a.maxShares&&!await n(a.id,{maxShares:o})?[!1,"Cupos m\xE1ximos"]:r!=a.maximumAge&&!await n(a.id,{maximumAge:r})?[!1,"Edad m\xE1xima"]:d!=a.minimumAge&&!await n(a.id,{minimumAge:d})?[!1,"Edad m\xEDnima"]:e.houseScheduleStartTime!=a.scheduleStartTime&&!await n(a.id,{scheduleStartTime:e.houseScheduleStartTime})?[!1,"Tiempo de inicio del horario de atenci\xF3n"]:e.houseScheduleEndTime!=a.scheduleEndTime&&!await n(a.id,{scheduleEndTime:e.houseScheduleEndTime})?[!1,"Tiempo de fin del horario de atenci\xF3n"]:e.houseContactCI!=a.contact.ci&&!await n(a.id,{contactCI:e.houseContactCI})?[!1,"C\xE9dula de identidad de contacto"]:[!0,""]}function F(e){return fetch(`/api/houses/${e.id}`,{method:"DELETE",mode:"same-origin"})}export{P as A,I as B,O as a,j as b,v as c,F as d,k as e,M as g,H as i,B as u};
