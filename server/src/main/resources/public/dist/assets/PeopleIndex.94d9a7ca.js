import{r as d,j as e,M as $,a as F,b as t,G as s,T as r,w as z,a3 as k,c as H,u as U,a4 as W,F as j,a5 as G,a6 as _,a7 as V,d as X,R as T,P as C,B as y,a8 as Z}from"./index.6f94c60a.js";import{n as O,A as q,S as m}from"./AddButton.d203515a.js";import{B as v,a as J}from"./houses.bdd5c657.js";import{g as M,a as K,b as Q,d as Y}from"./children.1f7fa8c5.js";import{M as w}from"./MenuItem.15897e82.js";import{C as ee,a as te,b as re,c as ae}from"./CardMedia.3a442345.js";import"./dividerClasses.ded1b393.js";function ie({child:a,open:u,onClose:f}){if(!a)return null;const[b,A]=d.exports.useState(M(a)),[g,c]=d.exports.useState(null);return d.exports.useEffect(()=>{Promise.all(a.relBen.map(K)).then(c)},[]),e($,{open:u,onClose:f,closeAfterTransition:!0,keepMounted:!0,children:e(F,{in:u,children:t(v,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"background.paper",width:560,maxHeight:"97.5%",border:"1px solid black",borderRadius:1,overflow:"auto"},children:[e(v,{sx:{width:"100%",paddingTop:"56.25%",position:"relative"},children:e("img",{src:b,style:{width:"100%",height:"100%",cursor:"pointer",position:"absolute",inset:0},onError:p=>{p.preventDefault(),A(O)}})}),e(v,{sx:{userSelect:"none",p:4},children:t(s,{container:!0,spacing:4,children:[t(s,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"CEDULA DE IDENTIDAD"}),e(r,{variant:"body1",children:a.information.ci})]}),t(s,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"FECHA DE NACIMIENTO"}),e(r,{variant:"body1",children:a.information.birthdate})]}),t(s,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"NOMBRE"}),e(r,{variant:"body1",children:a.information.name})]}),t(s,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"APELLIDO"}),e(r,{variant:"body1",children:a.information.lastname})]}),t(s,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"MADRE"}),e(r,{variant:"body1",children:a.mother?`${a.mother.name} ${a.mother.lastname}`:"Fallecida"})]}),t(s,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"PADRE"}),e(r,{variant:"body1",children:a.father?`${a.father.name} ${a.father.lastname}`:"Fallecido"})]}),t(s,{item:!0,xs:12,children:[e(r,{variant:"subtitle2",children:"REPRESENTANTE"}),e(r,{variant:"body1",children:a.nonParent?`${a.nonParent.name} ${a.nonParent.lastname}`:"No tiene"})]}),t(s,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"TALLA DE SHORT O PANTALON"}),e(r,{variant:"body1",children:a.attire.shortOrTrousersSize})]}),t(s,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"TALLA DE CAMISA O CAMISETA"}),e(r,{variant:"body1",children:a.attire.tshirtOrshirtSize})]}),a.attire.sweaterSize&&t(s,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"TALLA DE SU\xC9TER"}),e(r,{variant:"body1",children:a.attire.sweaterSize})]}),a.attire.dressSize&&t(s,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"TALLA DE VESTIDO"}),e(r,{variant:"body1",children:a.attire.dressSize})]}),t(s,{item:!0,xs:6,children:[e(r,{variant:"subtitle2",children:"TALLA DE CALZADO"}),e(r,{variant:"body1",children:a.attire.footwearSize})]}),g&&t(s,{item:!0,xs:12,children:[e(r,{variant:"subtitle2",children:"BENEFICIARIOS RELACIONADOS"}),g.map(({id:p,information:h},E)=>p?t(r,{variant:"body1",children:[h==null?void 0:h.name," ",h==null?void 0:h.lastname]},p):e(r,{variant:"body2",color:"red",children:"BENEFICIARIO ELIMINADO"},E))]})]})})]})})})}const x=5;function he(){const a=d.exports.useMemo(()=>new Array(x).fill(1),[]),[u,f]=d.exports.useState({children:null}),[b,A]=d.exports.useState(null),g=z(k),[c,p]=d.exports.useState(g!=null?g:{id:"none"}),[h,E]=d.exports.useState(""),N=H(),I=U(),[S,L]=d.exports.useState(null),D=d.exports.useMemo(()=>{var i;return(i=u.children)==null?void 0:i.filter(n=>n.information.name.toLowerCase().includes(h.toLowerCase())||n.information.lastname.toLowerCase().includes(h.toLowerCase())).reduce((n,o,l,B)=>l%x==0?[B.slice(l,l+x),...n]:n,[])},[u,h]),R=(i,n)=>{i.stopPropagation(),I(Z(n)),N("actualizar")},P=async(i,n)=>{i.stopPropagation(),await Y(n.id),!!(u!=null&&u.children)&&c&&p({...c})};return d.exports.useEffect(()=>{J().then(i=>{A(i)})},[]),d.exports.useEffect(()=>{!c||(f({children:null}),Q(c.id).then(i=>f({children:i})),I(W(c)))},[c]),console.log(g,c),t(j,{children:[S&&e(ie,{child:S,open:!!S,onClose:()=>L(null)}),t(v,{sx:{display:"flex",gap:3},children:[t(G,{sx:{width:"25%"},children:[e(_,{id:"house-select",children:"Seleccionar Casa..."}),t(V,{labelId:"house-select",label:"Seleccionar Casa...",value:c?c.id:"none",onChange:i=>{var o;const n=i.target.value;n=="none"?p({id:"none"}):n!="none"&&b&&p((o=b.find(l=>l.id==n))!=null?o:{id:"none"})},children:[b&&e(w,{value:"none",children:"Sin Casa"}),b&&b.map(i=>e(w,{value:i.id,children:i.name},i.id))]})]}),e(X,{fullWidth:!0,variant:"outlined",label:"Buscar ni\xF1o/ni\xF1a beneficiaria",sx:{backgroundColor:"#eee"},onChange:i=>E(i.target.value)}),e(q,{popoverText:"Crear beneficiario",route:"crear"})]}),e(F,{in:!!u.children,children:e(v,{sx:{pt:6},children:t(s,{container:!0,spacing:4,children:[!u.children&&a.map((i,n)=>t(T.Fragment,{children:[e(s,{item:!0,xs:12/x,children:t(C,{variant:"outlined",sx:{px:2,pt:0,pb:3},children:[e(m,{height:150}),e(m,{height:30})]})},`${n}-0`),e(s,{item:!0,xs:12/x,children:t(C,{variant:"outlined",sx:{px:2,pt:0,pb:3},children:[e(m,{height:150}),e(m,{height:30})]})},`${n}-1`),e(s,{item:!0,xs:12/x,children:t(C,{variant:"outlined",sx:{px:2,pt:0,pb:3},children:[e(m,{height:150}),e(m,{height:30})]})},`${n}-2`),e(s,{item:!0,xs:12/x,children:t(C,{variant:"outlined",sx:{px:2,pt:0,pb:3},children:[e(m,{height:150}),e(m,{height:30})]})},`${n}-3`)]},n)),D&&D.map((i,n)=>e(T.Fragment,{children:i.map(o=>e(s,{item:!0,xs:12/x,onClick:()=>L(o),children:o&&t(ee,{variant:"outlined",sx:{height:"100%",display:"grid",cursor:"pointer","&:hover":{boxShadow:"-2px 2px 20px rgba(0 0 0 / 15%), 2px -2px 20px rgba(0 0 0 / 15%), 2px 2px 20px rgba(0 0 0 /15%), -2px -2px 20px rgba(0 0 0 / 15%)"}},children:[e(te,{component:"img",height:150,image:M(o),onError:l=>{l.preventDefault(),l.target.src=O}}),t(re,{children:[t(r,{component:"p",sx:{fontWeight:600},variant:"subtitle1",gutterBottom:!0,children:[o.information.name," ",o.information.lastname]}),t(r,{component:"p",variant:"subtitle2",fontWeight:400,children:["C\xC9DULA: ",o.information.ci]}),t(r,{component:"p",variant:"subtitle2",fontWeight:400,children:["SEXO: ",o.attire.sweaterSize?"Masculino":"Femenino"]}),t(r,{component:"p",variant:"subtitle2",fontWeight:400,children:["NACIMIENTO: ",o.information.birthdate]})]}),t(ae,{sx:{mt:"auto"},children:[e(y,{onClick:l=>R(l,o),variant:"outlined",children:"Editar"}),e(y,{onClick:l=>P(l,o),color:"error",variant:"outlined",children:"Eliminar"})]})]})},o.id))},n))]})})})]})}export{he as default};
